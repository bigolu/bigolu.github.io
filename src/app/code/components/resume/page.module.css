.container::before, .container.unemployed::after {
  grid-column: 2;
  justify-self: center;
}

.container::before {
  /* TODO: They may add a keyword to span all rows: https://github.com/w3c/csswg-drafts/issues/2402 */
  grid-row: 1 / var(--row-count);
  width: 2px;
  background: linear-gradient(
    rgb(var(--active-timeline-rgb)) var(--length-to-highlight),
    rgb(var(--inactive-timeline-rgb)) var(--length-to-highlight)
  );
  content: "";
  border-radius: 5px;
}

.container.unemployed::after {
  grid-row: calc(var(--row-count) - 2) / var(--row-count);
  content: "";
  border-left: 2px dashed rgb(var(--background-rgb));
}

.container {
  width: 100%;
  display: grid;
  row-gap: 30px;
  --logo-height: 4rem;
  /* I need something wide enough so logos are always padded on their sides since vertical padding would increase
  the logo's distance from the timeline line. */
  --logo-aspect-ratio: 32 / 9;
  --logo-vertical-padding: 10px;
  --widest-logo-width: calc(calc(var(--logo-height) - calc(2 * var(--logo-vertical-padding))) * calc(var(--logo-aspect-ratio)));
  --widest-logo-width-one-third: calc(var(--widest-logo-width) / 3);
  grid-template-columns:  repeat(3, var(--widest-logo-width-one-third)) auto;
  grid-template-rows: auto;
  position: relative; /* for offsetTop */
  margin-bottom: 25vh;
}

.timeline-text.hidden {
  color: rgb(var(--inactive-foreground-rgb));
}

.timeline-image.hidden img {
  filter: brightness(50%);
}
.timeline-image.show img {
  filter: brightness(100%);
}

.timeline-text.show {
  color: rgb(var(--foreground-rgb));
}

.timeline-image {
  background-color: rgb(var(--background-rgb));
  height: var(--logo-height);
  grid-column: 1 / span 3;
  justify-self: center;
}

.timeline-image:first-child {
  margin-top: 30px;
}

.timeline-image img {
  padding-bottom: var(--logo-vertical-padding);
  padding-top: var(--logo-vertical-padding);
  width: auto;
  height: 100%;
  aspect-ratio: var(--logo-aspect-ratio);
  object-fit: scale-down;
}

.timeline-text {
  max-width: 70ch;
  grid-column: 3 / span 2;
  padding: 40px 0 40px 0;
}

@media (min-width: 1000px) {
  .container {
    grid-template-columns: 1fr repeat(3, var(--widest-logo-width-one-third)) 1fr;
  }
  .container::before, .container.unemployed::after {
    grid-column: 3;
  }
  .timeline-image {
    grid-column: 2 / span 3;
  }
  .timeline-text:nth-child(2n) {
    grid-column: 1 / span 2;
    text-align: right;
  }
  .timeline-text:nth-child(4n) {
    grid-column: 4 / span 2;
    text-align: left;
  }
}